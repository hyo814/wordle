# ✔ Worldle : 단어 추측 게임 구현하기
- 6번의 시도 안에 오늘의 워들을 알아내세요.
- 워들은 플레이어가 6번의 시도로 주어진 5글자의 영어단어를 추측하는 게임입니다.
- 이 프로그램은 React와 Next.js를 기반으로 구축되며, Recoil을 사용한 상태 관리를 통해 게임의 상태를 효과적으로 관리합니다. 
- 게임의 주요 목표는 사용자가 제한된 횟수의 시도 안에 숨겨진 단어를 맞히는 것입니다.


## ✔ 기술 스택 사용 이유
  - 1. REACT :
       - 컴포넌트 기반 아키텍처
       - 상태 관리의 용이성
       - 반응형 및 동적 UI


  - 2. NEXT :
       - SSR과 SSG : 더 빠르게 로드 되기 위함
       - 라우팅의 용이성 
       - 빌드 최적화와 기능


  - 3. RECOIL :
       - 상태 관리를 더 간편하게 만듦
       - 여러 상태 관리가 있지만 선택한 이유
         - 컴포넌트 간 상태 공유
         - 성능 최적화
         - 동시성 모드 지원
         - 유연성과 확장성
         - REACT와 유사한 패러다임 적용


### ✔ 사전 요구사항 (개발 당시 조건 )
- `node` : `v20.11.0`,
- `npm` : `v10.2.4`,
- `next`: `v12.3.4`,
- `react`: `v18.2.0`,


### ✔ 프로그램 실행 방법
- github : https://github.com/hyo814/wordle

   - 1. GitHub에서 원하는 저장소로 이동합니다.
   - 2. 저장소 페이지의 우측 상단에서 "Code" 버튼을 클릭합니다.
   - 3. "HTTPS" 탭이 선택되어 있는지 확인하고, 제공된 URL을 복사합니다.
   - 4. 터미널이나 명령 프롬프트를 열고, 파일을 클론하고자 하는 로컬 디렉토리로 이동합니다.
   - 5. 다음 명령어를 사용하여 저장소를 클론합니다.
     ```
     $ git clone [복사한 URL]
     ```
   - 6. 해당 되는 디렉토리 위치에서 아래 명령어를 실행하여 node 모듈을 설치합니다.
     ```
     $ yarn install
     ```
   - 7. yarn 모듈 설치가 완료되면, 아래 명령어로 프론트를 빌드합니다.
     ```
     $ yarn build
     ```
   * 개발을 진행하고자 한다면 8- 선택 1번 , 프로덕션을 진행 한다면 8- 선택 2번을 실행합니다.
   - 8. 빌드가 완료되면, 아래 명령어로 로컬 페이지로 접속 합니다. (개발 모드) - 선택 1
     ```
     $ yarn dev
     ```
   - 8. 빌드가 완료되면, 아래 명령어로 로컬 페이지로 접속 합니다. (프로덕션 모드) - 선택 2
     ```
     $ yarn start
     ```
   - 9. http://localhost:3000 로 접속하여 페이지에 대한 기능 확인이 가능합니다.
     ![결과화면](photo%2Fdone.png)
     ![결과화면 영상 일부](photo%2Fdone.gif)


### ✔ 파일 구조
```
Wordle
├── src
│   ├── __test__  # 테스트파일
│   │   ├── Answer.spec.tsx
│   │   ├── Complete.spec.tsx
│   │   ├── Game.spec.tsx
│   │   └── Index.spec.tsx
│   │
│   ├── components
│   │   ├── Common  # 공통
│   │   │   ├── CommonAlert.tsx
│   │   │   └── DecryptWithRetry.tsx
│   │   ├── Game  # 게임적용
│   │   │   ├── Board
│   │   │   │   ├── Spelling.tsx
│   │   │   │   └── Board.tsx
│   │   │   ├── KeyBoard  
│   │   │   │   ├── Key.tsx
│   │   │   │   └── KeyBoard.tsx
│   │   │   └── WordleView.ts
│   │ 
│   ├── pages  # 페이지뷰
│   │   ├── Answer  # 워들생성
│   │   │   └── index.tsx
│   │   ├── api #API
│   │   │   └── index.ts
│   │   ├── Complete  # 게임성공/실패 후
│   │   │   └── index.tsx
│   │   ├── Game  # 게임(워들)
│   │   │   └── index.tsx 
│   │   ├── _app.tsx
│   │   ├── _document.tsx
│   │   └── index.tsx
│   │ 
│   ├── state  # recoil 적용
│   │   ├── answer.ts
│   │   ├── complete.ts
│   │   ├── game.ts
│   │   ├── index.ts
│   │   └── snackbar.ts
│   │
│   ├── styles  # css 적용
│   │   ├── Board.module.css
│   │   ├── Error.module.css
│   │   ├── Game.module.css
│   │   ├── Index.module.css
│   │   ├── Key.module.css
│   │   ├── KeyBoard.module.css
│   │   └── Spelling.module.css
│   │
│   └── types  # 타입 적용
│       └── index.ts       
```


### ✔ 필수 요구사항:
1. 첫 페이지 버튼: 시작하기(정답은 WORLD로 고정), 워들 생성하기.
2. 워들 생성 기능: 사용자가 5글자로 된 워들을 생성
3. URL 라우팅: 생성된 워들을 URL을 통해 접속 가능. URL은 해시된 단어를 포함해야 하며, 정답을 직접 노출해서는 X.
4. 단어 검증: 입력된 단어가 실제로 존재하는지 해당 API를 통해 검증
5. 게임 결과 표시: 이번 게임의 플레이시간, 승리 횟수, 승률, 시도한 횟수의 통계를 표시
6. 문서화: 개발 과정과 문제 해결 방법을 문서화
7. 프로덕션 레벨 구현: 실제 회사에서 사용할 수 있는 수준으로 구현
8. 제출: 프로젝트를 GitHub 메인 브랜치에 반영


### ✔ 주요 기능 간편 소개
1. 첫 페이지에 들어오면 두가지 버튼이 있습니다. 시작하기(정답은 WORLD로 고정), 워들 생성하기
2. 워들 생성하기 버튼을 누르면 5글자로 된 워들을 직접 생성 가능합니다.
  - URL라우팅을 통해 생성한 워들을 풀이 가능하게 합니다. (브라우저를 종료해도 해당 URL로 접속하면 풀이하던 워들이 남아있어야 합니다. 또한 “해시(암호화)된 단어”가 포함된 URL을 다른 사람들에게 보낸 경우, 동작해야합니다.)
  - URL을 통해 바로 정답이 노출되면 안됩니다. 예 (정답이 WORLD일 경우 잘못된 예 :localhost:xxxx/WORLD → 올바른 예 localhost:xxxx/AgagG)
3. 입력되는 값들은 실제로 존재하는 단어야만 합니다.
  - 단어 검증은 [해당 API](https://dictionaryapi.dev/)에 요청을 보내서 검증합니다.
  - 단어 검증 실패시, 단어를 찾을 수 없습니다 라는 메세지가 표시됩니다.
4. 게임이 끝나게 되면 결과 창에 표시되어야 할 값들
  - 이번 게임 플레이시간
  - 현재까지 워들을 승리한 횟수
  - 현재까지의 워들 승률
  - 현재까지 워들 시도한 횟수의 통계


### ✔ 코드 설명
- 가. 기본 공통 사항
  - 암호화 라이브러리 사용 : URL을 통해 바로 정답이 노출을 방지 하고자 `CryptoJS` 라이브러리를 사용하여 암호화 및 복호화 작업
    - 복호화 등으로 인한 이슈를 방지 하고자 만약 복호화 실패시 1번 재 실행을 할 수 있도록 유도 및 실패 시 새로고침 <보안 고려 사항>
  - 모듈 css : 
    - 로컬 스코핑
    - 컴포넌트 기반 스타일링
    - 재사용성과 유지보수
  - router 기능을 이용하여 페이지 이동 용이
  - snackBar를 사용해서 alert를 보다 화면 친화적으로 개선
  - initialBoardData를 통해서 기본 이미지 대신 빈화면으로 워들의 생김새를 미리 알 수 있으며,
    빈 값에서 `value`와 `status`을 통해 워들의 진행을 파악
  - 보드와 키보드를 구분을 하여 진행
  -  반응형 디자인 : 미디어 쿼리 적용
  - 로컬 스토리지 사용 : 로컬 스토리지 목록 안내
    ```text
    - 1. 게임
      - 현재 추측 : currentGuess
      - 현재 행 : currentRow
      - 보드 데이터 : currentGuess
    
    - 2. 게임 성공 이후
      - 이번 게임 플레이시간: playTime
      - 현재까지 워들을 승리한 횟수: totalWins
      - 현재까지의 워들 승률: winRate
      - 현재까지 워들 시도한 횟수의 통계: triesStatStr
      - 총 게임 횟수: totalGames
    ```

- 나. Answer 
  - 입력값 검증: 사용자 입력을 받아 영문자만 허용하고, 5글자를 초과할 수 없도록 검증
  - 단어 검사: dictionaryCheck 함수를 사용해 사용자가 입력한 단어가 유효한지 확인
  - 암호화 및 라우팅: 입력 단어가 유효하면, 단어를 암호화하여 /Game 페이지로 라우팅
  - 스낵바 메시지 관리: 입력 오류나 검사 실패 시 사용자에게 안내 메시지를 표시하기 위해 스낵바 상태를 관리
  - 키보드 이벤트 처리: 사용자가 Enter 키를 눌렀을 때, 단어의 길이가 5글자일 경우 게임을 시작하는 로직을 처리


- 다. Game
  - 복호화 및 게임 시작 시간 설정: 페이지가 로드될 때 URL 쿼리에서 받은 암호화된 단어를 복호화하고, 게임의 시작 시간을 설정
  - 단어의 중복 처리 : 정답 단어에 포함된 각 글자의 수를 추적 후 사용자가 추측한 글자가 정답 단어에 있을 때마다 해당 글자의 수를 줄여가며, 이를 통해 중복된 글자를 처리
  - 사용자 입력 처리: 사용자로부터 입력받은 키가 Backspace(←)일 경우 마지막 문자를 삭제하고, Enter(↵)일 경우 단어를  API를 통해 검증하며, 
    그 외의 경우에는 단어에 문자를 추가
  - 단어 검증 및 평가: 입력된 단어가 사전에 있는 단어인지 확인하고, 각 문자의 상태(정확함, 존재함, 없음)를 평가하여 보드에 업데이트 진행
  - 게임 결과 처리: 사용자가 단어를 모두 맞추거나 모든 시도를 사용했을 경우, 게임 결과를 다른 페이지에서 공유 (게임이 끝나게 되면 결과 창에 표시되어야 할 값들)
  - 로컬 스토리지 사용: 브라우저를 종료해도 해당 URL로 접속하면 풀이하던 워들이 남아있게 하기 위해 사용 <데이터 처리>
    - 엔터 클릭 시에만 해당 하는 줄에 대해 로컬 스토리지 저장 진행 (현재 추측, 현재 행, 보드 데이터)
  - 완전히 평가가 완료 되면 위의 로컬 스토리지 값 (현재 추측, 현재 행, 보드 데이터)들은 제거 (complete로 인하여 데이터가 필요 없음)


- 라. Complete
  - 게임 결과 처리 데이터 로드 : 게임 결과에 대한 내용을 얻으며 로컬 스토리지 사용으로 인하여 꾸준한 결과 값 도출
  - 데이터 유효성 검증 및 경고: 로드한 데이터가 없거나 유효하지 않은 경우 사용자에게 경고 메시지를 표시하고 초기 화면으로 리디렉션
  - 게임 결과 표시: 게임의 플레이 시간, 승리 횟수, 승률, 시도 통계, 총 게임 횟수를 화면에 표시
  - 게임 재시작 처리: "게임 재시작하기" 버튼을 클릭하면 모든 게임 데이터를 초기화하고 초기 화면으로 리디렉션 
  - 뒤로 가기 방지 및 처리: 사용자가 브라우저의 뒤로 가기를 시도할 때 초기 화면으로 넘어가는 로직을 처리하고, 페이지를 벗어나려 할 때 경고를 표시

